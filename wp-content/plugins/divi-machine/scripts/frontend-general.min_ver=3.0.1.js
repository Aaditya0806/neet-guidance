function get_post_popup() { if (jQuery(".dmach-popup").remove(), jQuery(".show_modal").length > 0) { var e = jQuery(".show_modal").eq(0).attr("data-modal-layout"), t = jQuery(".show_modal").eq(0).attr("data-modal-style"), a = (e = jQuery(".show_modal").eq(0).attr("data-modal-layout"), []), s = jQuery(".show_modal").eq(0).closest(".divi-filter-archive-loop").attr("data-posttype"); jQuery(".show_modal").each(function () { a.push(jQuery(this).attr("data-id")) }); var o = { action: "divi_filter_get_post_modal_ajax_handler", post_ids: a.join(","), post_type: s, modal_layout: e }; jQuery.ajax({ url: filter_ajax_object.ajax_url, data: o, type: "POST", dataType: "JSON", success: function (e) { jQuery("body").find("#dmach-modal-wrapper").remove(), jQuery(".et-l--body").length ? jQuery(".et-l--body").append('<div id="dmach-modal-wrapper" class="' + t + '"></div>') : jQuery("#page-container").append('<div id="dmach-modal-wrapper" class="' + t + '"></div>'), jQuery(".show_modal").each(function () { var t = jQuery(this).attr("data-id"); jQuery("#dmach-modal-wrapper").append('<div id="post-modal-' + t + '" class="dmach-popup"><div class="post-modal-cont"><div class="modal-close"></div>' + e.content["show_modal_" + t] + '<div class="dmach-nextprev-post"><div class="dmach-prev-post"></div><div class="dmach-next-post"></div></div></div></div>'), jQuery("#post-modal-" + t).find(".et_pb_map_container").length > 0 && jQuery("#post-modal-" + t).find(".et_pb_map_container").each(function () { et_pb_map_init(jQuery(this)) }), jQuery(this).click(function (e) { e.preventDefault(), e.stopPropagation(), jQuery("#post-modal-" + t).addClass("open"), jQuery("body").css("overflow", "hidden") }) }), jQuery(".et-modal-wrapper").append(e.css_output); var a = jQuery(".divi-filter-archive-loop.main-archive-loop"); if (a.find(".grid-col").find(".gallery_vars").length > 0) { var s = a.find(".grid-col").find(".gallery_vars").attr("data-gallery_vars"), o = a.find(".grid-col").find(".gallery_vars").attr("data-gallery_type"); if (s = "{" + (s = (s = (s = s.replace(/,\s*$/, "")).replace(/,/g, ", ")).replace(/'/g, '"')) + "}", s = JSON.parse(s), jQuery(".et_pb_de_mach_acf_slider_containter").each(function (e, t) { jQuery(this).slick("unslick"), jQuery(this).slick(s) }), "gallery" == o) { var c = a.find(".grid-col").find(".gallery_vars").attr("data-gallery_nav"); c = "{" + (c = (c = (c = c.replace(/,\s*$/, "")).replace(/,/g, ", ")).replace(/'/g, '"')) + "}", (c = JSON.parse(c)).asNavFor = ".et_pb_de_mach_acf_slider_containter", c.focusOnSelect = !0, jQuery(".et_pb_de_mach_acf_slider_containter_nav").each(function (e, t) { jQuery(this).slick("unslick"), jQuery(this).slick(c) }) } } jQuery(".et_pb_gallery_image a").magnificPopup({ type: "image" }), resizeAllGridItems() } }) } } function same_height_cards() { jQuery(".same-height-cards .filtered-posts").each(function () { var e = 0; jQuery(".grid-col", this).each(function () { jQuery(this).height() > e && (e = jQuery(this).height()) }); var t = jQuery(this).find(".et_pb_section").css("marginBottom"); jQuery(".grid-col", this).height(e), jQuery(".grid-col", this).css("margin-bottom", t) }) } jQuery(document).ready(function (e) { e(document.body).on("click", ".et_pb_de_mach_search_posts .et_pb_button", function () { e(this).closest(".et_pb_de_mach_search_posts").find("#dmach-search-form").submit() }), e(".align-last-module").each(function () { var t = e(this); t.find(".slick-list").length ? t.find(".slick-slide:nth-child(1) .et_pb_section .et_pb_row").length > 1 ? t.addClass("align-multiple_rows") : t.addClass("align-single_row") : t.find(".et_pb_section .et_pb_row").length > 1 ? t.addClass("align-multiple_rows") : t.addClass("align-single_row") }), e(document.body).on("click", ".dmach-link-whole-grid-card", function () { var t = e(this).data("link-url"); window.location.href = t }), main_count = Number(0), e(".et_pb_de_mach_search_posts_item").each(function (t, a) { var s = Number(e(this).find(".search_filter_cont").attr("data-count")); main_count += s, main_count >= "100" && (e(this).addClass("last-item"), main_count = Number(0)) }), e(".search_filter_cont").removeClass("hidden"), e(".button_container").removeClass("hidden"), e("#select_post_types").on("change", function () { var t = this.value; e("#search_post_type").val(t) }); var t = e(".filtered-posts").attr("data-columns"); e(".filtered-posts").find(".et_pb_column").addClass(t), e(window).click(function () { e(".et_pb_de_mach_search_posts_item").removeClass("visible") }), e(".et_pb_de_mach_search_posts_item").click(function (e) { e.stopPropagation() }), e(".dmach-filer-toggle .et_pb_contact_field_options_title ").click(function (t) { e(this).closest(".et_pb_de_mach_search_posts_item").hasClass("visible") ? e(".et_pb_de_mach_search_posts_item").removeClass("visible") : (e(".et_pb_de_mach_search_posts_item").removeClass("visible"), e(this).closest(".et_pb_de_mach_search_posts_item").addClass("visible")) }), e(".dmach-tag-cloud a").click(function (t) { var a = e(this).attr("class").match(/tag-link-[\w-]*\b/); e(this).closest(".dmach-tag-cloud").find("select").val(a), e(this).closest(".dmach-tag-cloud").find("select").trigger("change") }), get_post_popup() }), jQuery(document).on("touchstart click", ".dmach-popup .modal-close", function () { jQuery(this).closest(".dmach-popup").removeClass("open"), jQuery("body").css("overflow", "auto") }), jQuery(document).on("touchstart click", ".dmach-popup", function () { jQuery(this).closest(".dmach-popup").removeClass("open"), jQuery("body").css("overflow", "auto") }), jQuery(document).on("touchstart click", ".post-modal-cont", function (e) { e.stopPropagation() }), jQuery(document).on("touchstart click", ".dmach-next-post", function (e) { jQuery(this).closest(".dmach-popup").next(".dmach-popup").length ? (jQuery(this).closest(".dmach-popup").removeClass("open"), jQuery(this).closest(".dmach-popup").next(".dmach-popup").addClass("open")) : (jQuery(this).closest(".dmach-popup").removeClass("open"), jQuery("body").css("overflow", "auto")) }), jQuery(document).on("touchstart click", ".dmach-prev-post", function (e) { jQuery(this).closest(".dmach-popup").prev(".dmach-popup").length ? (jQuery(this).closest(".dmach-popup").removeClass("open"), jQuery(this).closest(".dmach-popup").prev(".dmach-popup").addClass("open")) : (jQuery(this).closest(".dmach-popup").removeClass("open"), jQuery("body").css("overflow", "auto")) });